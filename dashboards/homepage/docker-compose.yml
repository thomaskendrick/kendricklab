services:
  homepage:
    image: ghcr.io/gethomepage/homepage:latest
    container_name: homepage
    expose:
      - 3000
    volumes:
      - ${CONFIG_ROOT}/homepage/config:/app/config
      - /var/run/docker.sock:/var/run/docker.sock:ro
    environment:
      HOMEPAGE_ALLOWED_HOSTS: "*"
    restart: unless-stopped
    labels:
      homepage.group: "Dashboards"
      homepage.name: "Homepage"
      homepage.icon: "homepage.png"
      homepage.href: "https://${DOMAIN}"
      homepage.description: "The dashboard itself"
      traefik.enable: "true"
      traefik.http.routers.homepage.rule: "Host(`${DOMAIN}`)"
      traefik.http.routers.homepage.entrypoints: "https"
      traefik.http.routers.homepage.tls.certresolver: "cloudflare"
      traefik.http.routers.homepage.service: "homepage"
      traefik.http.services.homepage.loadbalancer.server.port: "3000"
    networks:
      - traefik_public

networks:
  traefik_public:
    external: true
